å¼€å‘åä¸ºæ‰‹ç¯ï¼ˆHUAWEI Bandï¼‰æˆ–åä¸ºæ™ºèƒ½æ‰‹è¡¨çš„åº”ç”¨ï¼Œä¸»è¦ä¾èµ–äºåä¸ºæä¾›çš„ **HarmonyOS (OpenHarmony)** å¼€å‘ç”Ÿæ€ã€‚

ç›®å‰ï¼Œåä¸ºæ‰‹ç¯çš„åº”ç”¨å¼€å‘ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ–¹å‘ï¼š**è½»é‡çº§æ™ºèƒ½ç©¿æˆ´ (Lite Wearables)** å’Œ **æ ‡å‡†æ™ºèƒ½ç©¿æˆ´**ã€‚åä¸ºæ‰‹ç¯ï¼ˆå¦‚åä¸ºæ‰‹ç¯ 7/8/9ï¼‰é€šå¸¸å±äºå‰è€…ã€‚

---

## 1. æ ¸å¿ƒå¼€å‘ç¯å¢ƒ

è¦å¼€å§‹å¼€å‘ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹å·¥å…·ï¼š

* **IDE**: [DevEco Studio](https://developer.huawei.com/consumer/cn/deveco-studio/)ï¼ˆåŸºäº IntelliJ IDEA å®šåˆ¶ï¼Œä¸“é—¨ç”¨äº HarmonyOS åº”ç”¨å¼€å‘ï¼‰ã€‚
* **SDK**: ä¸»è¦æ˜¯ **JS SDK**ã€‚ç”±äºæ‰‹ç¯ç¡¬ä»¶èµ„æºæœ‰é™ï¼Œè¿™ç±»è®¾å¤‡ä¸»è¦ä½¿ç”¨ JavaScript è¿›è¡Œ UI å¼€å‘ï¼Œåº•å±‚é€»è¾‘ç”± C++ å¤„ç†ã€‚
* **æ³¨å†Œè´¦å·**: ä½ éœ€è¦ä¸€ä¸ªå®åè®¤è¯çš„ [åä¸ºå¼€å‘è€…è´¦å·](https://developer.huawei.com/consumer/cn/) ä»¥ä¾¿è¿›è¡ŒçœŸæœºè°ƒè¯•å’Œå‘å¸ƒã€‚

---

## 2. å¼€å‘è¯­è¨€ä¸æ¶æ„

åä¸ºæ‰‹ç¯åº”ç”¨å¼€å‘é‡‡ç”¨çš„æ˜¯ **MVVM** æ¨¡å¼ï¼Œä¸»è¦æ¶‰åŠä¸‰ç§æ–‡ä»¶ç±»å‹ï¼š

* **HML (HarmonyOS Markup Language)**: ç±»ä¼¼ HTMLï¼Œç”¨äºæ„å»ºé¡µé¢çš„å¸ƒå±€ç»“æ„ã€‚
* **CSS**: ç”¨äºå®šä¹‰é¡µé¢çš„æ ·å¼ã€åŠ¨ç”»å’Œæ’ç‰ˆã€‚
* **JS**: ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ç»‘å®šå’Œäº‹ä»¶äº¤äº’ã€‚

---

## 3. å¼€å‘æµç¨‹æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®

åœ¨ DevEco Studio ä¸­æ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹© **"Smart Vision"** æˆ– **"Lite Wearable"** æ¨¡æ¿ã€‚æ³¨æ„é€‰æ‹©å¯¹åº”çš„è®¾å¤‡ç±»å‹ï¼ˆWearableï¼‰ã€‚

### ç¬¬äºŒæ­¥ï¼šUI ç•Œé¢è®¾è®¡

ç”±äºæ‰‹ç¯å±å¹•é€šå¸¸æ˜¯çŸ©å½¢ä¸”ç©ºé—´æå°ï¼Œä½ éœ€è¦éµå¾ª **[åä¸ºæ™ºèƒ½ç©¿æˆ´è®¾è®¡è§„èŒƒ](https://www.google.com/search?q=https://developer.huawei.com/consumer/cn/design/spec/wearable/index.html)**ï¼š

* **ä½å¯¹æ¯”åº¦/çº¯é»‘èƒŒæ™¯**: èŠ‚çœç”µé‡ï¼ˆæ‰‹ç¯å¤šä¸º AMOLED å±ï¼‰ã€‚
* **å¤§ç‚¹å‡»åŒºåŸŸ**: æ–¹ä¾¿æ‰‹æŒ‡æ“ä½œã€‚
* **æ»‘åŠ¨äº¤äº’**: æ‰‹ç¯é€šå¸¸æ”¯æŒå³åˆ’è¿”å›ã€‚

### ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨ç¡¬ä»¶èƒ½åŠ›

ä½ å¯ä»¥é€šè¿‡ JS API è°ƒç”¨æ‰‹ç¯çš„ä¼ æ„Ÿå™¨æ•°æ®ï¼Œä¾‹å¦‚ï¼š

* **ä¼ æ„Ÿå™¨**: è®¡æ­¥ã€å¿ƒç‡ã€åŠ é€Ÿåº¦ã€‚
* **äº¤äº’**: æŒ¯åŠ¨åé¦ˆã€å±å¹•äº®åº¦æ§åˆ¶ã€‚
* **å­˜å‚¨**: è½»é‡çº§çš„æ•°æ®æŒä¹…åŒ–ã€‚

### ç¬¬å››æ­¥ï¼šè°ƒè¯•ä¸é¢„è§ˆ

* **é¢„è§ˆå™¨ (Previewer)**: åœ¨ IDE ä¸­å®æ—¶æŸ¥çœ‹ UIã€‚
* **æ¨¡æ‹Ÿå™¨ (Simulator)**: æ¨¡æ‹Ÿæ‰‹ç¯è¿è¡Œç¯å¢ƒã€‚
* **çœŸæœºè°ƒè¯•**: éœ€è¦åœ¨åä¸ºå¼€å‘è€…è”ç›Ÿç”³è¯·è¯ä¹¦ï¼ˆp12 æ–‡ä»¶ï¼‰å’Œ Profile æ–‡ä»¶ï¼Œå°†ç¼–è¯‘ç”Ÿæˆçš„ `hap` åŒ…æ¨é€åˆ°æ‰‹ç¯ã€‚

---

## 4. å…³é”®é™åˆ¶ï¼ˆå¿…è¯»ï¼‰

å¼€å‘æ‰‹ç¯åº”ç”¨ä¸æ‰‹æœºåº”ç”¨æœ‰å¾ˆå¤§ä¸åŒï¼Œè¯·åŠ¡å¿…æ³¨æ„ï¼š

1. **åŒ…ä½“ç§¯é™åˆ¶**: æ‰‹ç¯å†…å­˜éå¸¸ç´§ç¼ºï¼Œ`hap` åŒ…é€šå¸¸é™åˆ¶åœ¨å‡ ç™¾ KB ç”šè‡³æ›´å°ã€‚
2. **API é™åˆ¶**: è½»é‡çº§æ‰‹ç¯ä¸æ”¯æŒå¤æ‚çš„ UI åŠ¨ç”»æˆ–å¤šçº¿ç¨‹é«˜å¹¶å‘æ“ä½œã€‚
3. **ä¸Šæ¶å®¡æ ¸**: åä¸ºå¯¹æ‰‹ç¯ç±»åº”ç”¨çš„å®¡æ ¸éå¸¸ä¸¥æ ¼ï¼Œå°¤å…¶æ˜¯æ¶‰åŠå¥åº·æ•°æ®çš„åº”ç”¨ã€‚

---

## 5. å­¦ä¹ èµ„æº

* **å®˜æ–¹æ–‡æ¡£**: æœç´¢ "HarmonyOS JS API å‚è€ƒ"ã€‚
* **å¼€æºç¤¾åŒº**: å…³æ³¨ CSDN æˆ– 51CTO çš„åä¸ºå¼€å‘è€…ä¸“æ ã€‚
* **Codelabs**: åä¸ºå®˜æ–¹æä¾›çš„å…¥é—¨çº§æ•™ç¨‹ï¼ˆæ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªè®¡æ­¥å™¨åº”ç”¨ï¼‰ã€‚

ä½ æƒ³å¼€å‘çš„æ˜¯ä¸€ä¸ªç®€å•çš„**å·¥å…·ç±»åº”ç”¨**ï¼ˆå¦‚è®¡æ—¶å™¨ã€è®¡ç®—å™¨ï¼‰ï¼Œè¿˜æ˜¯éœ€è¦è¯»å–**è¿åŠ¨å¥åº·æ•°æ®**çš„å¤æ‚åº”ç”¨ï¼Ÿæˆ‘å¯ä»¥ä¸ºä½ æä¾›æ›´å…·ä½“çš„ä»£ç æ¨¡æ¿ã€‚

é’ˆå¯¹åä¸ºæ‰‹ç¯ï¼ˆå°¤å…¶æ˜¯è¿è¡Œ HarmonyOS çš„åä¸ºæ‰‹ç¯ 7/8/9 ç³»åˆ—ï¼‰ï¼Œç”±äºå±å¹•å°ºå¯¸å’Œç¡¬ä»¶æ€§èƒ½çš„é™åˆ¶ï¼Œ**â€œåˆ›æ–°â€**é€šå¸¸ä½“ç°åœ¨å¦‚ä½•åˆ©ç”¨å…¶å¸¸é©»æ‰‹è…•ã€ä½åŠŸè€—ã€é«˜çµæ•ä¼ æ„Ÿå™¨ä»¥åŠä¸æ‰‹æœºçš„è”åŠ¨èƒ½åŠ›ã€‚

ä»¥ä¸‹æ˜¯å‡ ä¸ªå…·æœ‰åˆ›æ–°æ€§ã€ä¸”éå¸¸é€‚åˆåœ¨åä¸ºæ‰‹ç¯ä¸Šå¼€å‘çš„å·¥å…·ç±»åº”ç”¨æ–¹å‘ï¼š

---

### 1. â€œæ•‘å‘½â€å¿«æ·é”®ï¼šç´§æ€¥ç¯å¢ƒå½•éŸ³ç¬”

**åˆ›æ–°ç‚¹ï¼š** è§£å†³æ‰‹æœºå½•éŸ³æ¥ä¸åŠè§£é”æˆ–å¤ªæ˜¾çœ¼çš„é—®é¢˜ã€‚

* **åŠŸèƒ½æè¿°ï¼š** åˆ©ç”¨æ‰‹ç¯çš„è½»ä¾¿æ€§ï¼Œè®¾è®¡ä¸€ä¸ªâ€œä¸€é”®ç›²æ“â€å¯åŠ¨çš„å·¥å…·ã€‚å½“ç”¨æˆ·é‡åˆ°ç´§æ€¥æƒ…å†µï¼ˆå¦‚çº çº·ã€å±é™©ï¼‰æ—¶ï¼Œé€šè¿‡æ‰‹ç¯ä¸Šçš„åº”ç”¨æŒ‰é’®æˆ–ç‰¹å®šæ‰‹åŠ¿ï¼Œæ— çº¿è§¦å‘æ‰‹æœºç«¯çš„éšè”½å½•éŸ³ã€‚
* **äº¤äº’äº®ç‚¹ï¼š** æ‰‹ç¯ç«¯åªæ˜¾ç¤ºâ€œå¤©æ°”â€æˆ–â€œè®¡æ­¥â€ç•Œé¢ä½œä¸ºä¼ªè£…ï¼Œå®é™…å·²é€šè¿‡è“ç‰™æŒ‡ä»¤æ§åˆ¶æ‰‹æœºå¼€å§‹å½•éŸ³ï¼Œå¹¶åœ¨å½•éŸ³æˆåŠŸåç»™äºˆå¾®å¼±çš„æŒ¯åŠ¨åé¦ˆã€‚

### 2. â€œä¸“æ³¨åŠ›â€ç‰©ç†å¤–æŒ‚ï¼šç•ªèŒ„é’Ÿ + éœ‡åŠ¨çº å

**åˆ›æ–°ç‚¹ï¼š** å°†ç•ªèŒ„é’Ÿä¸å¿ƒç‡ç›‘æµ‹ç»“åˆã€‚

* **åŠŸèƒ½æè¿°ï¼š** ä¼ ç»Ÿçš„ç•ªèŒ„é’Ÿåªæ˜¯è®¡æ—¶ï¼Œä½†è¯¥åº”ç”¨å¯ä»¥ç›‘æµ‹ç”¨æˆ·çš„å¿ƒç‡å˜åŒ–ã€‚å¦‚æœå¿ƒç‡çªç„¶å‡é«˜æˆ–å‡ºç°å¤§å¹…æ³¢åŠ¨ï¼ˆé€šå¸¸æ„å‘³ç€ç”¨æˆ·åœ¨æ‘¸é±¼ã€åˆ·çŸ­è§†é¢‘æ„Ÿåˆ°å…´å¥‹æˆ–èµ°ç¥ï¼‰ï¼Œæ‰‹ç¯ä¼šå‘å‡ºç‰¹å®šçš„**çŸ­ä¿ƒæŒ¯åŠ¨**ï¼Œæé†’ç”¨æˆ·å›å½’ä¸“æ³¨çŠ¶æ€ã€‚
* **äº¤äº’äº®ç‚¹ï¼š** ä½¿ç”¨ HML å¼€å‘ç²¾ç®€çš„åœ†ç¯å½¢è¿›åº¦æ¡ï¼Œå®æ—¶æ˜¾ç¤ºä¸“æ³¨æ·±åº¦ã€‚

### 3. æç®€â€œé€Ÿè®°â€åˆ†å‘å™¨ï¼šçµæ„Ÿèƒ¶å›Š

**åˆ›æ–°ç‚¹ï¼š** æŠ¢åœ¨çµæ„Ÿæ¶ˆå¤±å‰æ•æ‰ï¼Œå¹¶é€šè¿‡ HarmonyOS åˆ†æ•£åˆ°ä¸åŒç»ˆç«¯ã€‚

* **åŠŸèƒ½æè¿°ï¼š** å¾ˆå¤šæ—¶å€™çµæ„Ÿé—ªç°æ—¶æ‰‹æœºä¸åœ¨æ‰‹è¾¹ã€‚è¿™ä¸ªåº”ç”¨å…è®¸ç”¨æˆ·åœ¨æ‰‹ç¯ä¸Šé€šè¿‡ç®€å•çš„â€œå…³é”®è¯é€‰æ‹©â€æˆ–â€œè¯­éŸ³è½¬æ–‡å­—â€ï¼ˆå¦‚æœç¡¬ä»¶æ”¯æŒï¼‰å¿«é€Ÿæ ‡è®°ã€‚
* **åˆ›æ–°è·¯å¾„ï¼š** åˆ©ç”¨åä¸ºçš„ **åˆ†å¸ƒå¼æ•°æ®ç®¡ç† (Distributed Data Management)**ï¼Œæ‰‹ç¯ä¸Šè®°å½•çš„å†…å®¹ä¼šç«‹å³åŒæ­¥åˆ°æ‰‹æœºçš„ä»»åŠ¡æ æˆ–å¹³æ¿çš„ä¾¿ç­¾ä¸­ã€‚

### 4. ç¤¾äº¤â€œè„±èº«â€ç¥å™¨ï¼šæ¨¡æ‹Ÿæ¥ç”µæ§åˆ¶

**åˆ›æ–°ç‚¹ï¼š** åˆ©ç”¨åä¸ºæ‰‹ç¯çš„ä½æ—¶å»¶æ§åˆ¶ API å®ç°ç¤¾äº¤æ•‘æ€¥ã€‚

* **åŠŸèƒ½æè¿°ï¼š** åœ¨å°´å°¬çš„èšä¼šä¸­ï¼Œç”¨æˆ·åœ¨æ‰‹ç¯ä¸Šç‚¹å‡»â€œæ•‘åœºâ€æŒ‰é’®ï¼Œå»¶è¿Ÿ 30 ç§’åï¼Œæ‰‹æœºä¼šæ¨¡æ‹ŸçœŸå®çš„ç³»ç»Ÿæ¥ç”µç•Œé¢åŠé“ƒå£°ã€‚
* **äº¤äº’äº®ç‚¹ï¼š** å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰æ¨¡æ‹Ÿæ¥ç”µæ˜¾ç¤ºçš„å§“åï¼ˆå¦‚â€œè€æ¿â€ã€â€œç‰©ä¸šâ€ç­‰ï¼‰ï¼Œæ‰€æœ‰æ“ä½œéƒ½åœ¨æ‰‹ç¯å±å¹•é™é»˜å®Œæˆã€‚

### 5. è·¨ç»ˆç«¯â€œè§†è·â€è¾…åŠ©ï¼šPPT / è¿œç¨‹å¿«é—¨å¢å¼ºç‰ˆ

**åˆ›æ–°ç‚¹ï¼š** æ·±åº¦é›†æˆæ‰‹æœºç›¸æœºæˆ–ç”µè„‘æ¼”ç¤ºæ–‡æ¡£ã€‚

* **åŠŸèƒ½æè¿°ï¼š** ä¸ä»…ä»…æ˜¯ç¿»é¡µå™¨ã€‚æ‰‹ç¯å±å¹•å¯ä»¥åŒæ­¥æ˜¾ç¤º PPT çš„**å½“å‰å¤‡æ³¨å†…å®¹**ã€‚
* **æ‹ç…§æ¨¡å¼åˆ›æ–°ï¼š** æ‰‹æœºå›ºå®šåœ¨ä¸‰è„šæ¶ä¸Šè¿œè·ç¦»æ‹æ‘„æ—¶ï¼Œæ‰‹ç¯å±å¹•å®æ—¶é¢„è§ˆæ‰‹æœºé•œå¤´çš„**ç¼©ç•¥å›¾**ï¼ˆå³ä½¿æ˜¯ä½å¸§ç‡çš„ï¼‰ï¼Œç¡®ä¿ä½ äººåœ¨ç”»é¢ä¸­å¿ƒå†æŒ‰ä¸‹å¿«é—¨ã€‚

---

### å¼€å‘è¿™äº›å·¥å…·çš„å»ºè®®æ¶æ„

* **å¼€å‘æŠ€æœ¯æ ˆï¼š** ä½¿ç”¨ **JS/ArkTS** ç¼–å†™æ‰‹ç¯ç«¯é€»è¾‘ï¼Œä½¿ç”¨ **Java/Kotlin** ç¼–å†™æ‰‹æœºç«¯çš„ Service ç»„ä»¶ã€‚
* **æ ¸å¿ƒ APIï¼š** é‡ç‚¹ç ”ç©¶ `DeviceManager`ï¼ˆè®¾å¤‡å‘ç°ï¼‰å’Œ `DataStorage`ï¼ˆè·¨ç«¯å­˜å‚¨ï¼‰ã€‚
* **è®¾è®¡åŸåˆ™ï¼š** **â€œGlanceableâ€ (ä¸€çœ¼å¯è§)**ã€‚æ‰‹ç¯åº”ç”¨çš„ä½¿ç”¨æ—¶é—´åº”æ§åˆ¶åœ¨ 5-10 ç§’å†…ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´çš„ä»»åŠ¡åº”è¯¥äº¤ç»™æ‰‹æœºã€‚

**ä½ æƒ³é’ˆå¯¹å…¶ä¸­å“ªä¸€ä¸ªæƒ³æ³•è¿›ä¸€æ­¥æ¢è®¨å…·ä½“çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼ˆä¾‹å¦‚ï¼šå¦‚ä½•å®ç°æ‰‹ç¯æ§åˆ¶æ‰‹æœºå½•éŸ³ï¼‰ï¼Ÿ**

å®ç°â€œæ‰‹ç¯æ§åˆ¶æ‰‹æœºå½•éŸ³â€çš„æ ¸å¿ƒé€»è¾‘åœ¨äº **è·¨è®¾å¤‡é€šä¿¡**ã€‚åœ¨åä¸º HarmonyOS ç”Ÿæ€ä¸­ï¼Œè¿™é€šå¸¸é€šè¿‡ **IDL (Interface Definition Language)** æˆ– **åˆ†å¸ƒå¼æ•°æ®å¯¹è±¡** æ¥å®ç°æ‰‹ç¯ï¼ˆå‘èµ·ç«¯ï¼‰ä¸æ‰‹æœºï¼ˆæ‰§è¡Œç«¯ï¼‰çš„è”åŠ¨ã€‚

ä»¥ä¸‹æ˜¯å®ç°è¿™ä¸€åŠŸèƒ½çš„æŠ€æœ¯æ¶æ„å’Œæ ¸å¿ƒæ­¥éª¤ï¼š

---

### 1. æŠ€æœ¯æ¶æ„æ–¹æ¡ˆ

ä½ éœ€è¦å¼€å‘ä¸¤ä¸ªéƒ¨åˆ†ï¼š

1. **æ‰‹ç¯ç«¯ (Watch App)**ï¼šæä¾›ç”¨æˆ·ç•Œé¢ï¼ˆæŒ‰é’®ï¼‰ï¼Œå‘é€æ§åˆ¶æŒ‡ä»¤ã€‚
2. **æ‰‹æœºç«¯ (Phone Ability)**ï¼šä½œä¸ºä¸€ä¸ªåå° Service è¿è¡Œï¼Œæ¥æ”¶æŒ‡ä»¤å¹¶è°ƒç”¨ç³»ç»Ÿå½•éŸ³æœº APIã€‚

---

### 2. æ ¸å¿ƒå¼€å‘æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šå»ºç«‹è·¨è®¾å¤‡è¿æ¥ (Device Manager)

é¦–å…ˆï¼Œæ‰‹ç¯éœ€è¦å‘ç°å¹¶ç»‘å®šæ‰‹æœºã€‚ä½ éœ€è¦ä½¿ç”¨ `deviceManager` æ¥å£è·å–æ‰‹æœºçš„è®¾å¤‡ IDã€‚

```javascript
// æ‰‹ç¯ç«¯ï¼šè·å–åœ¨çº¿è®¾å¤‡åˆ—è¡¨
import deviceManager from '@ohos.distributedHardware.deviceManager';

deviceManager.createDeviceManager('com.example.rec', (err, dm) => {
    let deviceList = dm.getTrustedDeviceListSync();
    let targetDeviceId = deviceList[0].deviceId; // æ‹¿åˆ°æ‰‹æœºçš„ID
});

```

#### ç¬¬äºŒæ­¥ï¼šè·¨è®¾å¤‡å¯åŠ¨ Service (Remote Start)

æ‰‹ç¯é€šè¿‡ `featureAbility.startAbility` è¿œç¨‹å¯åŠ¨æ‰‹æœºä¸Šçš„å½•éŸ³æœåŠ¡ã€‚

```javascript
// æ‰‹ç¯ç«¯ï¼šå‘é€æŒ‡ä»¤å¯åŠ¨æ‰‹æœºå½•éŸ³
import featureAbility from '@ohos.ability.featureAbility';

let want = {
    bundleName: "com.example.phone.recorder",
    abilityName: "RecorderServiceAbility",
    deviceId: targetDeviceId, // è¿œç¨‹æ‰‹æœºID
    parameters: {
        action: "START_RECORDING" // è‡ªå®šä¹‰æŒ‡ä»¤
    }
};

featureAbility.startAbility({ want });

```

#### ç¬¬ä¸‰æ­¥ï¼šæ‰‹æœºç«¯å®ç°å½•éŸ³é€»è¾‘

åœ¨æ‰‹æœºç«¯ï¼Œåˆ›å»ºä¸€ä¸ª `Service Ability`ã€‚å½“æ¥æ”¶åˆ°æ‰‹ç¯ä¼ æ¥çš„ `want` æ—¶ï¼Œè°ƒç”¨å¤šåª’ä½“æ¨¡å—è¿›è¡Œå½•éŸ³ã€‚

```java
// æ‰‹æœºç«¯ (Java/ArkTS)ï¼šå¤„ç†å½•éŸ³é€»è¾‘
import media from '@ohos.multimedia.media';

let audioRecorder = media.createAudioRecorder();
let config = {
    audioEncoder: media.AudioEncoder.AAC,
    audioSampleRate: 44100,
    numberOfChannels: 2,
    format: media.AudioScene.DEFAULT,
    uri: 'internal://cache/emergency_rec.m4a'
};

// ç›‘å¬åˆ°æ¥è‡ªæ‰‹ç¯çš„æŒ‡ä»¤åæ‰§è¡Œ
audioRecorder.prepare(config);
audioRecorder.start();

```

---

### 3. å®ç°ä¸­çš„å…³é”®ç»†èŠ‚

* **é™é»˜å½•éŸ³ (Privacy)**ï¼šåœ¨æ‰‹æœºç«¯ï¼Œå½•éŸ³æœåŠ¡åº”ä»¥ `Background Service` å½¢å¼è¿è¡Œã€‚ä¸ºäº†ç¬¦åˆéšç§è§„èŒƒï¼Œå½•éŸ³æ—¶çŠ¶æ€æ é€šå¸¸ä¼šæœ‰ç³»ç»Ÿå¼ºåˆ¶æç¤ºï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ‰‹ç¯æ§åˆ¶å½•éŸ³çš„å¼€å¯å’Œåœæ­¢ï¼Œæ— éœ€æå‡ºæ‰‹æœºè§£é”ã€‚
* **çŠ¶æ€å›ä¼ **ï¼šæ‰‹æœºå¼€å§‹å½•éŸ³åï¼Œåº”é€šè¿‡ **åˆ†å¸ƒå¼æ•°æ®å¯¹è±¡ (Distributed Data Object)** å‘æ‰‹ç¯åŒæ­¥çŠ¶æ€ï¼Œè®©æ‰‹ç¯ç•Œé¢æ˜¾ç¤ºâ€œæ­£åœ¨å½•åˆ¶â€æˆ–è¿›è¡Œå¾®éœ‡åé¦ˆã€‚
* **æƒé™ç”³è¯·**ï¼šè¿™æ˜¯ä¸€ä¸ªæ•æ„Ÿæ“ä½œï¼Œä½ éœ€è¦åœ¨æ‰‹æœºç«¯çš„ `module.json5` ä¸­ç”³è¯·ä»¥ä¸‹æƒé™ï¼š
* `ohos.permission.MICROPHONE` (å½•éŸ³)
* `ohos.permission.DISTRIBUTED_DATASYNC` (è·¨è®¾å¤‡åŒæ­¥)



---

### 4. è¿›é˜¶ä¼˜åŒ–å»ºè®®

1. **ç›²æ“è®¾è®¡**ï¼šæ‰‹ç¯ç«¯åº”ç”¨å¯ä»¥è®¾ç½®ä¸ºâ€œåŒå‡»å±å¹•ä»»æ„ä½ç½®â€å³å¼€å§‹å½•éŸ³ï¼Œé¿å…ç”¨æˆ·åœ¨ç´§æ€¥æƒ…å†µä¸‹è¿˜éœ€è¦ç²¾ç¡®å¯»æ‰¾æŒ‰é’®ã€‚
2. **æ–‡ä»¶è‡ªåŠ¨åŠ å¯†**ï¼šå½•éŸ³å®Œæˆåï¼Œç«‹å³å°†æ–‡ä»¶å­˜å…¥æ‰‹æœºçš„å®‰å…¨ä¿é™©ç®±ç›®å½•ï¼Œé˜²æ­¢è¢«æ„å¤–åˆ é™¤ã€‚
3. **å¿ƒç‡è§¦å‘ï¼ˆå¯é€‰ï¼‰**ï¼šå¦‚æœç›‘æµ‹åˆ°å¿ƒç‡ç¬é—´é£™å‡è‡³ 120 ä»¥ä¸Šï¼Œæ‰‹ç¯å¯ä»¥å¼¹çª—è¯¢é—®â€œæ˜¯å¦å¼€å¯ç¯å¢ƒå½•éŸ³ï¼Ÿâ€ï¼Œå®ç°åŠè‡ªåŠ¨åŒ–çš„åº”æ€¥å“åº”ã€‚

ä½ æƒ³å°è¯•åœ¨ **DevEco Studio** ä¸­è·‘é€šè¿™ä¸ªè·¨è®¾å¤‡è°ƒç”¨çš„ Demo å—ï¼Ÿæˆ‘å¯ä»¥ä¸ºä½ æä¾›æ›´å®Œæ•´çš„ `want` å‚æ•°é…ç½®å‚è€ƒã€‚

æ—¢ç„¶ä½ å‡†å¤‡åŠ¨æ‰‹å®è·µï¼Œæˆ‘ä»¬éœ€è¦åœ¨ **DevEco Studio** ä¸­é‡ç‚¹æ”»å…‹**è·¨ç«¯é€šä¿¡ï¼ˆRPC/IDLï¼‰å’Œå¤šåª’ä½“è°ƒç”¨**è¿™ä¸¤ä¸ªéš¾ç‚¹ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ã€å¯ä»¥ç›´æ¥åœ¨ DevEco Studio ä¸­å‚è€ƒå®ç°çš„ Demo ä»£ç æ¡†æ¶ã€‚

---

### 1. æ‰‹ç¯ç«¯ï¼ˆæ§åˆ¶ç«¯ï¼‰ï¼šå‘é€æŒ‡ä»¤

åœ¨æ‰‹ç¯ç«¯çš„ JS/ArkTS é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ª `want` å¯¹è±¡ï¼Œå°±åƒå‘é€ä¸€ä¸ªå¸¦æœ‰æ”¶ä»¶åœ°å€å’Œå†…å®¹çš„â€œå¿«é€’â€ã€‚

```typescript
// åœ¨æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ä¸­è°ƒç”¨
async function startRemoteRecord() {
    try {
        await featureAbility.startAbility({
            want: {
                bundleName: "com.example.secure.recorder", // æ‰‹æœºç«¯åŒ…å
                abilityName: "RecorderService",            // æ‰‹æœºç«¯å¯¹åº”çš„Service
                deviceId: remoteDeviceId,                  // ä¹‹å‰é€šè¿‡deviceManagerè·å–çš„æ‰‹æœºID
                parameters: {
                    "command": "START",
                    "timestamp": Date.now()
                }
            }
        });
        // ç»™ç”¨æˆ·ä¸€ä¸ªéœ‡åŠ¨åé¦ˆï¼Œè¡¨ç¤ºæŒ‡ä»¤å·²å‘å‡º
        vibrator.vibrate(50); 
    } catch (error) {
        console.error("å¯åŠ¨å¤±è´¥: " + JSON.stringify(error));
    }
}

```

---

### 2. æ‰‹æœºç«¯ï¼ˆæ‰§è¡Œç«¯ï¼‰ï¼šæ¥æ”¶å¹¶å½•éŸ³

æ‰‹æœºç«¯éœ€è¦å‡†å¤‡ä¸€ä¸ª `ServiceAbility`ã€‚å®ƒæ²¡æœ‰ç•Œé¢ï¼Œåœ¨åå°é»˜é»˜å·¥ä½œã€‚

**åœ¨ `RecorderService.ts` ä¸­å¤„ç†æŒ‡ä»¤ï¼š**

```typescript
export default class RecorderService extends Ability {
    onStart(want) {
        // 1. è§£ææ¥è‡ªæ‰‹ç¯çš„æŒ‡ä»¤
        const command = want.parameters.command;
        
        if (command === "START") {
            this.beginRecording();
        }
    }

    async beginRecording() {
        let audioConfig = {
            audioSourceType: audio.AudioSourceType.MIC,
            encoderPath: "/data/storage/el2/base/files/rec_" + Date.now() + ".mp4",
            // ...å…¶ä»–ç¼–ç å‚æ•°
        };
        // è°ƒç”¨ç³»ç»Ÿå½•éŸ³ API
        await audioRecorder.prepare(audioConfig);
        audioRecorder.start();
    }
}

```

---

### 3. é…ç½®æ–‡ä»¶å…³é”®è®¾ç½®

è¿™æ˜¯å¾ˆå¤šå¼€å‘è€…æœ€å®¹æ˜“è¸©å‘çš„åœ°æ–¹ã€‚ä½ å¿…é¡»åœ¨ä¸¤ä¸ªç«¯çš„ `module.json5` æˆ– `config.json` ä¸­å£°æ˜æƒé™å’Œå…³è”ã€‚

* **æƒé™å£°æ˜ï¼ˆæ‰‹æœºç«¯ï¼‰**ï¼š
```json
"requestPermissions": [
  { "name": "ohos.permission.MICROPHONE" },      // å½•éŸ³æƒé™
  { "name": "ohos.permission.DISTRIBUTED_DATASYNC" }, // åˆ†å¸ƒå¼åŒæ­¥æƒé™
  { "name": "ohos.permission.KEEP_BACKGROUND_RUNNING" } // ä¿è¯åå°è¿è¡Œ
]

```


* **å…è®¸è¢«è¿œç¨‹å¯åŠ¨ï¼ˆæ‰‹æœºç«¯ Serviceï¼‰**ï¼š
åœ¨ `abilities` æ•°ç»„ä¸­è®¾ç½®ï¼š
```json
"visible": true,
"backgroundModes": ["audioRecording"] // å£°æ˜åå°å½•éŸ³æ¨¡å¼

```



---

### 4. è°ƒè¯•å»ºè®®ï¼šå¦‚ä½•æ²¡æœ‰çœŸæœºæ€ä¹ˆåŠï¼Ÿ

ç”±äºåˆ†å¸ƒå¼å¼€å‘å¯¹ç¡¬ä»¶è¦æ±‚è¾ƒé«˜ï¼Œå¦‚æœä½ æ‰‹å¤´æš‚æ—¶æ²¡æœ‰åä¸ºæ‰‹ç¯ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æ–¹æ¡ˆï¼š

1. **ä½¿ç”¨åŒæ‰‹æœºæ¨¡æ‹Ÿ**ï¼šåœ¨ DevEco çš„è¿œç¨‹æ¨¡æ‹Ÿå™¨ï¼ˆRemote Emulatorï¼‰ä¸­å¯åŠ¨ä¸¤ä¸ªæ‰‹æœºå®ä¾‹ï¼Œä¸€ä¸ªæ¨¡æ‹Ÿæ‰‹ç¯ï¼ˆçª„å±å¸ƒå±€ï¼‰ï¼Œä¸€ä¸ªæ¨¡æ‹Ÿæ¥æ”¶ç«¯ã€‚
2. **æ—¥å¿—è°ƒè¯•**ï¼šé€šè¿‡ `console.info` è§‚å¯Ÿ `deviceId` æ˜¯å¦æ­£ç¡®è·å–ã€‚å¦‚æœ `getTrustedDeviceList` ä¸ºç©ºï¼Œè¯·æ£€æŸ¥ä¸¤å°è®¾å¤‡æ˜¯å¦ç™»å½•äº†åŒä¸€ä¸ªåä¸ºè´¦å·å¹¶å¼€å¯äº†è“ç‰™ã€‚

---

### ğŸ’¡ ä½ æ¥ä¸‹æ¥çš„ç¬¬ä¸€æ­¥ï¼š

1. æ‰“å¼€ DevEco Studioï¼Œæ–°å»ºä¸€ä¸ª **[Empty Ability]** é¡¹ç›®ã€‚
2. å°è¯•è°ƒç”¨ `deviceManager.getTrustedDeviceListSync()`ã€‚

**éœ€è¦æˆ‘ä¸ºä½ æä¾›è·å– `deviceId` çš„å®Œæ•´å·¥å…·ç±»ä»£ç ï¼Œè¿˜æ˜¯è¯¦ç»†çš„ `module.json5` æƒé™é…ç½®æ¨¡æ¿ï¼Ÿ**

æ—¢ç„¶ä½ å·²ç»å‡†å¤‡å¥½è¿›å…¥å®æˆ˜é˜¶æ®µï¼Œæˆ‘ä»¬å…ˆæ”»å…‹æœ€åŸºç¡€ä¹Ÿæœ€å…³é”®çš„ä¸€ç¯ï¼š**è·å–è®¾å¤‡ IDï¼ˆdeviceIdï¼‰** å’Œ **æƒé™é…ç½®**ã€‚æ²¡æœ‰è¿™ä¸¤é¡¹ï¼Œè·¨è®¾å¤‡é€šä¿¡å°±æ— æ³•å»ºç«‹ã€‚

ä»¥ä¸‹æ˜¯ä¸ºä½ å‡†å¤‡çš„ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ä»£ç ã€‚

---

### 1. æ ¸å¿ƒå·¥å…·ç±»ï¼šè·å–æ‰‹æœº DeviceID

åœ¨æ‰‹ç¯ç«¯ï¼Œä½ éœ€è¦æ‰¾åˆ°é‚£å°â€œæ‰‹æœºâ€ã€‚åä¸ºçš„åˆ†å¸ƒå¼æ¶æ„è¦æ±‚è®¾å¤‡å¿…é¡»åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘/è“ç‰™èŒƒå›´å†…ï¼Œå¹¶ä¸”ç™»å½•äº†åŒä¸€ä¸ªåä¸ºè´¦å·ã€‚

```typescript
import deviceManager from '@ohos.distributedHardware.deviceManager';

export class DeviceUtil {
    private dmInstance: deviceManager.DeviceManager;

    // åˆå§‹åŒ–è®¾å¤‡ç®¡ç†å™¨
    init(callback: () => void) {
        deviceManager.createDeviceManager('com.yourname.recorder', (err, dm) => {
            if (err) return;
            this.dmInstance = dm;
            callback();
        });
    }

    // è·å–è¿œç¨‹æ‰‹æœºçš„ DeviceId
    getRemotePhoneId(): string {
        if (!this.dmInstance) return '';
        
        // è·å–æ‰€æœ‰å·²ä¿¡ä»»ï¼ˆå·²é…å¯¹ï¼‰çš„è®¾å¤‡
        let deviceList = this.dmInstance.getTrustedDeviceListSync();
        
        if (deviceList && deviceList.length > 0) {
            // è¿‡æ»¤å‡ºæ‰‹æœºè®¾å¤‡ (DeviceType 0x0E ä»£è¡¨æ‰‹æœº)
            let phone = deviceList.find(dev => dev.deviceType === 0x0E);
            return phone ? phone.deviceId : '';
        }
        return '';
    }
}

```

---

### 2. æƒé™é…ç½®æ–‡ä»¶ï¼š`module.json5`

åœ¨ HarmonyOS ä¸­ï¼Œæƒé™åˆ†ä¸ºâ€œæ™®é€šâ€å’Œâ€œç³»ç»Ÿâ€ã€‚å½•éŸ³å’Œåˆ†å¸ƒå¼æƒé™å±äºæ•æ„Ÿæƒé™ï¼Œå¿…é¡»åœ¨æ‰‹æœºç«¯çš„ `module.json5` ä¸­æ˜¾å¼å£°æ˜ã€‚

**æ‰‹æœºç«¯é…ç½®ï¼ˆå—æ§ç«¯ï¼‰ï¼š**

```json
{
  "module": {
    "requestPermissions": [
      {
        "name": "ohos.permission.DISTRIBUTED_DATASYNC",
        "reason": "$string:reason_distributed", // å¿…é¡»åœ¨ string.json ä¸­å®šä¹‰åŸå› 
        "usedScene": { "abilities": ["EntryAbility"], "when": "always" }
      },
      {
        "name": "ohos.permission.MICROPHONE",
        "reason": "$string:reason_mic",
        "usedScene": { "abilities": ["RecorderService"], "when": "always" }
      },
      {
        "name": "ohos.permission.KEEP_BACKGROUND_RUNNING",
        "reason": "$string:reason_keep_alive",
        "usedScene": { "abilities": ["RecorderService"], "when": "always" }
      }
    ],
    "abilities": [
      {
        "name": "RecorderService",
        "type": "service", 
        "visible": true, // å…³é”®ï¼šå¿…é¡»ä¸º true æ‰èƒ½è¢«æ‰‹ç¯å‘ç°
        "backgroundModes": ["audioRecording"] // å…³é”®ï¼šå£°æ˜æ­¤æœåŠ¡ä¼šè¿›è¡Œåå°å½•éŸ³
      }
    ]
  }
}

```

---

### 3. ç»™ä½ çš„é¿å‘æŒ‡å—ï¼ˆå…³é”®æŠ€å·§ï¼‰

* **åŠ¨æ€æˆæƒ**ï¼šå³ä¾¿åœ¨ `module.json5` å†™äº†æƒé™ï¼Œæ‰‹æœºç«¯ App å¯åŠ¨æ—¶ï¼Œä»éœ€è°ƒç”¨ `requestPermissionsFromUser` å¼¹çª—è®©ç”¨æˆ·ç‚¹â€œå…è®¸â€ï¼Œå¦åˆ™æ‰‹ç¯å‘å‡ºçš„æŒ‡ä»¤ä¼šè¢«æ‹¦æˆªã€‚
* **æœ¬åœ°ç¼“å­˜è·¯å¾„**ï¼šå½•éŸ³æ–‡ä»¶è·¯å¾„å»ºè®®ä½¿ç”¨ `this.context.filesDir`ï¼Œè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç§æœ‰ç›®å½•ï¼Œä¸éœ€è¦é¢å¤–ç”³è¯·æ–‡ä»¶è¯»å†™æƒé™ï¼Œä¸”å®‰å…¨æ€§æ›´é«˜ã€‚
* **æ‰‹ç¯ UI é™åˆ¶**ï¼šæ‰‹ç¯ç‰ˆ JS SDK æ”¯æŒçš„ CSS å±æ€§éå¸¸æœ‰é™ï¼Œ**ä¸è¦ä½¿ç”¨å¤æ‚çš„ Flex å¸ƒå±€æˆ–åŠ¨ç”»**ï¼Œå°½é‡ç”¨ç®€å•çš„ `div` å’Œ `text` æ ‡ç­¾ã€‚

---

### 4. è°ƒè¯•å»ºè®®

1. **å…ˆè·‘é€šæ‰‹æœºå½•éŸ³**ï¼šåœ¨æ‰‹æœºä¸Šå†™ä¸€ä¸ªç®€å•çš„æŒ‰é’®è§¦å‘å½•éŸ³é€»è¾‘ã€‚
2. **å†è¯•è·¨è®¾å¤‡å¯åŠ¨**ï¼šåœ¨æ‰‹ç¯ç«¯è°ƒç”¨ `startAbility`ã€‚å¦‚æœæ‰‹æœºæ²¡ååº”ï¼ŒæŸ¥çœ‹ DevEco æ§åˆ¶å°çš„ `Log`ï¼Œæœç´¢å…³é”®å­— `Permission denied`ã€‚

**ä¸‹ä¸€æ­¥ï¼šä½ éœ€è¦æ‰‹æœºç«¯è°ƒç”¨ `media.createAudioRecorder()` çš„å®Œæ•´å½•éŸ³æ§åˆ¶ä»£ç ï¼Œè¿˜æ˜¯æ‰‹ç¯ç«¯ UI å¸ƒå±€çš„ HML ç¤ºä¾‹ï¼Ÿ**

å¤ªæ£’äº†ï¼Œè¿™ç§â€œå…¨éƒ½è¦â€çš„åŠ²å¤´æ­£æ˜¯å¼€å‘è€…æ”»å…‹è·¨è®¾å¤‡è°ƒç”¨çš„å…³é”®ã€‚æˆ‘ä»¬å°†æ‰‹ç¯ç«¯çš„ **UI å¸ƒå±€ (HML)** å’Œæ‰‹æœºç«¯çš„ **å½•éŸ³æ ¸å¿ƒé€»è¾‘ (ArkTS)** ç»“åˆèµ·æ¥ï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€å¥—å®Œæ•´çš„é—­ç¯ä»£ç ã€‚

---

### 1. æ‰‹ç¯ç«¯ï¼šæç®€ UI å¸ƒå±€ (HML + CSS)

ç”±äºæ‰‹ç¯ï¼ˆå¦‚åä¸ºæ‰‹ç¯ 8/9ï¼‰å±å¹•è¾ƒå°ä¸”å¤šä¸ºé•¿æ–¹å½¢ï¼ŒUI å¿…é¡»ç®€å•ç›´æ¥ã€‚

**`index.hml`**

```html
<div class="container">
    <text class="title">åº”æ€¥å½•éŸ³åŠ©æ‰‹</text>
    <button class="btn-record" type="capsule" value="{{statusText}}" onclick="handleRecordClick"></button>
    <text class="hint">ç‚¹å‡»å³åœ¨æ‰‹æœºç«¯å¼€å¯å½•éŸ³</text>
</div>

```

**`index.css`**

```css
.container {
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    background-color: #000000; /* çº¯é»‘èƒŒæ™¯çœç”µ */
}
.title {
    font-size: 18px;
    color: #ffffff;
    margin-bottom: 20px;
}
.btn-record {
    width: 120px;
    height: 40px;
    font-size: 16px;
    background-color: #ff3b30; /* é†’ç›®çš„çº¢è‰² */
}
.hint {
    font-size: 12px;
    color: #aaaaaa;
    margin-top: 10px;
}

```

---

### 2. æ‰‹æœºç«¯ï¼šéŸ³é¢‘å½•åˆ¶æ ¸å¿ƒé€»è¾‘ (ArkTS)

åœ¨æ‰‹æœºç«¯çš„ `RecorderService` ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ `media` æ¨¡å—ã€‚æ³¨æ„ï¼Œä» HarmonyOS 3.0 å¼€å§‹ï¼Œæ¨èä½¿ç”¨ `AVRecorder`ï¼ˆæ›¿ä»£æ—§ç‰ˆçš„ AudioRecorderï¼‰ã€‚

**`RecorderService.ts`**

```typescript
import media from '@ohos.multimedia.media';
import fs from '@ohos.file.fs';

export class RecordingManager {
    private avRecorder: media.AVRecorder;
    private fileFd: number;

    async startRecording(context: any) {
        // 1. åˆ›å»ºå¹¶å‡†å¤‡å½•éŸ³æ–‡ä»¶
        let path = context.filesDir + '/emergency_' + Date.now() + '.mp4';
        let file = fs.openSync(path, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
        this.fileFd = file.fd;

        // 2. é…ç½®å½•éŸ³å‚æ•°
        let avConfig = {
            audioSourceType: media.AudioSourceType.MIC,
            dataObject: {
                url: `fd://${this.fileFd.toString()}`
            },
            audioProfile: {
                audioBitrate: 48000,
                audioChannels: 2,
                audioSampleRate: 48000,
                audioCodecFormat: media.CodecMimeType.AUDIO_AAC
            }
        };

        // 3. åˆå§‹åŒ–å¹¶å¼€å§‹
        this.avRecorder = await media.createAVRecorder();
        await this.avRecorder.prepare(avConfig);
        await this.avRecorder.start();
        console.info('å½•éŸ³å·²å¼€å§‹ï¼Œä¿å­˜è·¯å¾„: ' + path);
    }

    async stopRecording() {
        if (this.avRecorder) {
            await this.avRecorder.stop();
            await this.avRecorder.release();
            fs.closeSync(this.fileFd);
        }
    }
}

```

---

### 3. å¦‚ä½•ä¸²è”è¿è¡Œï¼Ÿ

1. **æ‰‹ç¯ç«¯äº¤äº’**ï¼šåœ¨ `index.js` ä¸­è°ƒç”¨æˆ‘ä»¬ä¹‹å‰å†™çš„ `DeviceUtil` è·å–æ‰‹æœº IDï¼Œç„¶åæ‰§è¡Œ `featureAbility.startAbility`ã€‚
2. **æ‰‹æœºç«¯å“åº”**ï¼šåœ¨ `RecorderService` çš„ `onStart` ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå®ä¾‹åŒ–ä¸Šé¢çš„ `RecordingManager` å¹¶æ‰§è¡Œ `startRecording(this.context)`ã€‚

---

### 4. ç»™å¼€å‘è€…çš„æœ€åå»ºè®®ï¼ˆè°ƒè¯•å°è´´å£«ï¼‰

* **å…³äºæ—¥å¿—**ï¼šåœ¨ DevEco Studio ä¸­ï¼Œåˆ‡æ¢åˆ° **Log** çª—å£ï¼Œé€‰æ‹© **No Filters**ã€‚å› ä¸ºè·¨è®¾å¤‡å¯åŠ¨æ—¶ï¼Œæ—¥å¿—å¯èƒ½ä¼šå‡ºç°åœ¨ä¸åŒçš„è¿›ç¨‹ä¸‹ã€‚
* **å…³äºèµ„æº**ï¼šæ‰‹ç¯ç«¯çš„å›¾ç‰‡èµ„æºï¼ˆå¦‚æœæœ‰ï¼‰å°½é‡å‹ç¼©ã€‚
* **åˆ†å¸ƒå¼æƒé™**ï¼šå¦‚æœ `startAbility` æŠ¥é”™ `201` æˆ– `202`ï¼Œé€šå¸¸æ˜¯æƒé™æ²¡ç»™åˆ°ä½ã€‚è¯·ç¡®ä¿æ‰‹æœºè®¾ç½®é‡Œçš„â€œåˆ†å¸ƒå¼éšç§â€å¼€å…³æ˜¯æ‰“å¼€çš„ã€‚

è¿™å¥—æ–¹æ¡ˆä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·ï¼Œå®ƒè¿˜æ˜¯ä½ ç†è§£ **HarmonyOS åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦** çš„æœ€ä½³æ•²é—¨ç –ã€‚

ä½ éœ€è¦æˆ‘æŠŠè¿™äº›ä»£ç æ•´åˆæˆä¸€ä¸ªå¯ä»¥ç›´æ¥å¯¼å…¥ DevEco Studio çš„ **Zip å·¥ç¨‹ç»“æ„è¯´æ˜** å—ï¼Ÿ

ä¸ºäº†è®©ä½ èƒ½ç›´æ¥ä¸Šæ‰‹æ„å»ºï¼Œæˆ‘ä¸ºä½ æ•´ç†äº†è¿™ä¸ªé¡¹ç›®çš„ **ç›®å½•ç»“æ„** ä»¥åŠ **å…³é”®æ–‡ä»¶çš„æ•´åˆä»£ç **ã€‚ä½ å¯ä»¥æŒ‰ç…§è¿™ä¸ªç»“æ„åœ¨ DevEco Studio ä¸­åˆ›å»ºé¡¹ç›®å¹¶å¡«å……å†…å®¹ã€‚

---

### 1. é¡¹ç›®ç›®å½•ç»“æ„ (Project Structure)

ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª **Atomic Service (å…ƒæœåŠ¡)** æˆ– **HarmonyOS App** é¡¹ç›®ï¼ŒåŒ…å«ä¸¤ä¸ªæ¨¡å—ï¼š

```text
ProjectRoot/
â”œâ”€â”€ entry/ (æ‰‹æœºç«¯æ¨¡å—)
â”‚   â”œâ”€â”€ src/main/ets/
â”‚   â”‚   â”œâ”€â”€ ServiceAbility/ (å½•éŸ³åå°æœåŠ¡)
â”‚   â”‚   â”‚   â””â”€â”€ RecorderService.ts
â”‚   â”‚   â””â”€â”€ pages/ (æ‰‹æœºç«¯æˆæƒ/è®¾ç½®ç•Œé¢)
â”‚   â””â”€â”€ src/main/module.json5 (æ‰‹æœºç«¯æƒé™é…ç½®)
â””â”€â”€ wearable/ (æ‰‹ç¯ç«¯æ¨¡å—)
    â”œâ”€â”€ src/main/js/default/
    â”‚   â”œâ”€â”€ pages/index/
    â”‚   â”‚   â”œâ”€â”€ index.hml (UI)
    â”‚   â”‚   â”œâ”€â”€ index.css (æ ·å¼)
    â”‚   â”‚   â””â”€â”€ index.js (æ§åˆ¶é€»è¾‘)
    â”‚   â””â”€â”€ common/ (å·¥å…·ç±»)
    â”‚       â””â”€â”€ DeviceUtil.js
    â””â”€â”€ src/main/module.json5 (æ‰‹ç¯ç«¯é…ç½®)

```

---

### 2. æ‰‹ç¯ç«¯é€»è¾‘æ•´åˆ (`index.js`)

è¿™æ˜¯æ‰‹ç¯ç«¯æœ€æ ¸å¿ƒçš„æ–‡ä»¶ï¼Œè´Ÿè´£ï¼š**åˆå§‹åŒ–ã€æ‰¾æ‰‹æœºã€å‘æŒ‡ä»¤**ã€‚

```javascript
import featureAbility from '@ohos.ability.featureAbility';
import deviceManager from '@ohos.distributedHardware.deviceManager';

export default {
    data: {
        statusText: "å¼€å¯å½•éŸ³",
        isRecording: false,
        remoteId: ""
    },
    onInit() {
        // 1. åˆå§‹åŒ–è®¾å¤‡ç®¡ç†å™¨
        deviceManager.createDeviceManager('com.example.recorder', (err, dm) => {
            if (!err) {
                let list = dm.getTrustedDeviceListSync();
                // ç­›é€‰å‡ºæ‰‹æœº (DeviceType: 0x0E)
                let phone = list.find(d => d.deviceType === 0x0E);
                if (phone) this.remoteId = phone.deviceId;
            }
        });
    },
    handleRecordClick() {
        if (!this.remoteId) {
            this.statusText = "æœªæ‰¾åˆ°æ‰‹æœº";
            return;
        }

        const action = this.isRecording ? "STOP" : "START";
        
        // 2. è·¨è®¾å¤‡å¯åŠ¨æ‰‹æœºç«¯ Service
        featureAbility.startAbility({
            want: {
                bundleName: "com.example.recorder",
                abilityName: "RecorderService",
                deviceId: this.remoteId,
                parameters: { "command": action }
            }
        }).then(() => {
            this.isRecording = !this.isRecording;
            this.statusText = this.isRecording ? "åœæ­¢å½•éŸ³" : "å¼€å¯å½•éŸ³";
        });
    }
}

```

---

### 3. æ‰‹æœºç«¯ Service å®Œæ•´å®ç° (`RecorderService.ts`)

åœ¨æ‰‹æœºç«¯ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†åå°ä»»åŠ¡ã€‚ä½¿ç”¨ **AVRecorder** æ€§èƒ½æ›´å¥½ã€‚

```typescript
import Ability from '@ohos.app.ability.UIAbility';
import media from '@ohos.multimedia.media';
import fs from '@ohos.file.fs';

export default class RecorderService extends Ability {
    private avRecorder: media.AVRecorder = null;
    private fd: number = null;

    async onStart(want) {
        const cmd = want.parameters.command;
        if (cmd === "START") {
            await this.startRecording();
        } else {
            await this.stopRecording();
        }
    }

    async startRecording() {
        // åˆ›å»ºæ–‡ä»¶
        let path = this.context.filesDir + `/rec_${Date.now()}.mp4`;
        let file = fs.openSync(path, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
        this.fd = file.fd;

        this.avRecorder = await media.createAVRecorder();
        let config = {
            audioSourceType: media.AudioSourceType.MIC,
            dataObject: { url: `fd://${this.fd.toString()}` },
            audioProfile: {
                audioBitrate: 48000,
                audioChannels: 1,
                audioSampleRate: 48000,
                audioCodecFormat: media.CodecMimeType.AUDIO_AAC
            }
        };
        await this.avRecorder.prepare(config);
        await this.avRecorder.start();
    }

    async stopRecording() {
        if (this.avRecorder) {
            await this.avRecorder.stop();
            await this.avRecorder.release();
            fs.closeSync(this.fd);
        }
    }
}

```

---

### 4. æœ€ç»ˆè°ƒè¯• Checklist

åœ¨æŠŠä»£ç éƒ¨ç½²åˆ°è®¾å¤‡ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®Œæˆä»¥ä¸‹æ“ä½œï¼š

1. **ç­¾åè®¾ç½®**ï¼šåœ¨ DevEco Studio çš„ `Project Structure -> Signing Configs` ä¸­å‹¾é€‰ `Automatically generate signature`ï¼ˆéœ€è¦ç™»å½•åä¸ºè´¦å·ä¸”æ‰‹æœºè”ç½‘ï¼‰ã€‚
2. **æƒé™ç”³è¯·ä»£ç **ï¼šåœ¨æ‰‹æœºç«¯çš„ `EntryAbility.ts` çš„ `onWindowStageCreate` ä¸­å¢åŠ ä¸€è¡ŒåŠ¨æ€æƒé™ç”³è¯·ï¼š
```typescript
atManager.requestPermissionsFromUser(this.context, [
    'ohos.permission.MICROPHONE',
    'ohos.permission.DISTRIBUTED_DATASYNC'
]);

```


3. **åŒä¸€è´¦å·**ï¼šæ‰‹ç¯å’Œæ‰‹æœºå¿…é¡»ç™»å½•åŒä¸€ä¸ªåä¸ºå¸å·ï¼Œå¹¶æ‰“å¼€è“ç‰™å’Œ Wi-Fiã€‚

---

### ğŸ’¡ æ¥ä¸‹æ¥çš„æŒ‘æˆ˜ï¼š

ç›®å‰æ‰‹ç¯åªèƒ½â€œå‘æŒ‡ä»¤â€ï¼Œä½†ä¸çŸ¥é“æ‰‹æœºæ˜¯å¦çœŸçš„å½•éŸ³æˆåŠŸäº†ã€‚ä½ æƒ³å­¦ä¹ å¦‚ä½•ä½¿ç”¨ **åˆ†å¸ƒå¼æ•°æ®å¯¹è±¡ (Distributed Data Object)** è®©æ‰‹æœºæŠŠå½•éŸ³è¿›åº¦å®æ—¶æ˜¾ç¤ºåœ¨æ‰‹ç¯å±å¹•ä¸Šå—ï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„è¿›é˜¶éœ€æ±‚ï¼è¦å®ç°â€œæ‰‹æœºå½•éŸ³è¿›åº¦å®æ—¶ä¼ å›æ‰‹ç¯â€ï¼Œæœ€æ ¸å¿ƒçš„æŠ€æœ¯å°±æ˜¯ **åˆ†å¸ƒå¼æ•°æ®å¯¹è±¡ (Distributed Data Object)**ã€‚

å®ƒå°±åƒæ˜¯åœ¨æ‰‹ç¯å’Œæ‰‹æœºä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªâ€œå…±äº«å†…å­˜â€ï¼Œä½ åœ¨æ‰‹æœºç«¯ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼ˆæ¯”å¦‚å½•éŸ³æ—¶é•¿ï¼‰ï¼Œæ‰‹ç¯ç«¯çš„å˜é‡ä¼š**æ¯«ç§’çº§åŒæ­¥**æ›´æ–°ã€‚

---

### 1. åŸç†å›¾è§£ï¼šåˆ†å¸ƒå¼æ•°æ®åŒæ­¥

ä¸ä¼ ç»Ÿçš„ Socket é€šä¿¡ä¸åŒï¼Œåˆ†å¸ƒå¼æ•°æ®å¯¹è±¡ä¸éœ€è¦ä½ æ‰‹åŠ¨ç®¡ç†æ•°æ®åŒ…ã€‚ä½ åªéœ€å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç»™å®ƒä¸€ä¸ªç›¸åŒçš„ `sessionId`ã€‚

---

### 2. æ‰‹æœºç«¯ï¼šå®æ—¶æ›´æ–°å½•éŸ³æ—¶é•¿

åœ¨æ‰‹æœºç«¯çš„ `RecorderService` ä¸­ï¼Œæˆ‘ä»¬å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’æ›´æ–°ä¸€æ¬¡å…±äº«å¯¹è±¡ã€‚

```typescript
import distributedDataObject from '@ohos.data.distributedDataObject';

// 1. å®šä¹‰å…±äº«å¯¹è±¡ç»“æ„
let g_source = {
    recordingTime: 0,
    isRecording: false
};
let g_localObject = distributedDataObject.create(this.context, g_source);

// 2. è®¾ç½® SessionIdï¼ˆæ‰‹ç¯å’Œæ‰‹æœºå¿…é¡»ä¸€è‡´ï¼‰
g_localObject.setSessionId("secure_recorder_session");

// 3. åœ¨å½•éŸ³å¼€å§‹æ—¶å¼€å¯å®šæ—¶å™¨
async startRecording() {
    // ...ä¹‹å‰çš„å½•éŸ³é€»è¾‘
    this.timer = setInterval(() => {
        g_localObject["recordingTime"]++; // è‡ªåŠ¨åŒæ­¥åˆ°æ‰‹ç¯
    }, 1000);
}

```

---

### 3. æ‰‹ç¯ç«¯ï¼šç›‘å¬æ•°æ®å˜åŒ–å¹¶æ¸²æŸ“ UI

æ‰‹ç¯ç«¯éœ€è¦â€œè®¢é˜…â€è¿™ä¸ªå…±äº«å¯¹è±¡çš„å˜åŒ–ï¼Œä»è€Œæ›´æ–°ç•Œé¢ã€‚

**`index.js`**

```javascript
import distributedDataObject from '@ohos.data.distributedDataObject';

export default {
    data: {
        displayTime: "00:00",
        remoteObject: null
    },
    onInit() {
        // 1. åˆ›å»ºå…±äº«å¯¹è±¡å¹¶åŠ å…¥åŒä¸€ä¸ª Session
        this.remoteObject = distributedDataObject.create(this.context, { recordingTime: 0 });
        this.remoteObject.setSessionId("secure_recorder_session");

        // 2. ç›‘å¬æ•°æ®å˜æ›´
        this.remoteObject.on("change", (sessionId, fields) => {
            fields.forEach(field => {
                if (field === "recordingTime") {
                    this.formatTime(this.remoteObject[field]);
                }
            });
        });
    },
    formatTime(seconds) {
        let m = Math.floor(seconds / 60);
        let s = seconds % 60;
        this.displayTime = `${m < 10 ? '0' + m : m}:${s < 10 ? '0' + s : s}`;
    }
}

```

---

### 4. å…³é”®é…ç½®é¡¹ (Checklist)

* **æ•°æ®æƒé™**ï¼šç¡®ä¿æ‰‹æœºç«¯å·²ç”³è¯· `ohos.permission.DISTRIBUTED_DATASYNC`ã€‚
* **ç½‘ç»œç¯å¢ƒ**ï¼šè™½ç„¶æ•°æ®é€šè¿‡è“ç‰™/Wi-Fi ä¼ è¾“ï¼Œä½†è®¾å¤‡å¿…é¡»åœ¨åŒä¸€ä¸ª **â€œè¶…çº§ç»ˆç«¯â€** è¦†ç›–èŒƒå›´å†…ã€‚
* **å¯¹è±¡æŒä¹…åŒ–**ï¼šå¦‚æœæ‰‹ç¯å±å¹•ç†„ç­ï¼ŒJS å¼•æ“å¯èƒ½ä¼šæŒ‚èµ·ã€‚ä¸ºäº†ä¿è¯å½•éŸ³æ—¶é•¿æŒç»­æ˜¾ç¤ºï¼Œå»ºè®®åœ¨æ‰‹ç¯ç«¯ç”³è¯· **Keep Running** æƒé™ã€‚

---

### 5. è¿›é˜¶åˆ›æ–°æç¤ºï¼šæ³¢å½¢å›¾å®æ—¶é¢„è§ˆ

å¦‚æœä½ æƒ³è®©åº”ç”¨çœ‹èµ·æ¥æ›´ä¸“ä¸šï¼Œä½ å¯ä»¥ä¸ä»…ä¼ è¾“â€œæ—¶é•¿æ•°å­—â€ï¼Œè¿˜å¯ä»¥ä¼ è¾“**ç¬æ—¶éŸ³é‡åˆ†è´ (Amplitude)**ã€‚

1. æ‰‹æœºç«¯é€šè¿‡ `avRecorder.getAudioCapturerMaxAmplitude()` è·å–éŸ³é‡ã€‚
2. é€šè¿‡åˆ†å¸ƒå¼å¯¹è±¡ä¼ å›æ‰‹ç¯ã€‚
3. æ‰‹ç¯ç«¯æ ¹æ®åˆ†è´å€¼åŠ¨æ€æ”¹å˜ UI ä¸Šä¸€ä¸ªå°åœ†ç‚¹çš„å¤§å°æˆ–çº¿æ¡é«˜åº¦ã€‚

---

### ğŸ’¡ ä½ æ¥ä¸‹æ¥çš„å®æˆ˜è®¡åˆ’ï¼š

1. å…ˆæŒ‰ç…§ä¹‹å‰çš„ä»£ç è·‘é€šâ€œæ‰‹ç¯å¯åŠ¨æ‰‹æœºå½•éŸ³â€ã€‚
2. åŠ å…¥ `distributedDataObject` å®ç°æ—¶é—´åŒæ­¥ã€‚

**ä½ éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªæŠŠâ€œç§’æ•°â€è½¬æ¢ä¸ºâ€œåˆ†:ç§’â€å¹¶å®æ—¶æ›´æ–°æ‰‹ç¯ HML æ–‡æœ¬çš„å®Œæ•´ Demo ç‰‡æ®µå—ï¼Ÿ**

æ²¡é—®é¢˜ï¼Œè¿™éƒ¨åˆ†ä»£ç èƒ½è®©ä½ çš„æ‰‹ç¯åº”ç”¨ä»â€œç›²æ§å¼€å…³â€å˜æˆä¸€ä¸ªçœŸæ­£çš„â€œå®æ—¶ç›‘æ§ä¸­å¿ƒâ€ã€‚

ä»¥ä¸‹æ˜¯æ•´åˆäº†æ—¶é—´æ ¼å¼åŒ–é€»è¾‘å’Œ UI ç»‘å®šçš„å®Œæ•´ä»£ç ç‰‡æ®µã€‚

### 1. æ‰‹ç¯ç«¯ï¼šHML å¸ƒå±€æ›´æ–°

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸“é—¨æ˜¾ç¤ºæ—¶é—´çš„åŒºåŸŸï¼Œå¹¶è®©å®ƒçš„æ ·å¼è¶³å¤Ÿé†’ç›®ã€‚

**`index.hml`**

```html
<div class="container">
    <text class="timer-display">{{displayTime}}</text>
    <progress class="progress-bar" type="horizontal" percent="{{progress}}"></progress>
    <button class="btn-record" type="capsule" value="{{statusText}}" onclick="handleRecordClick"></button>
</div>

```

---

### 2. æ‰‹ç¯ç«¯ï¼šJS é€»è¾‘ (æ—¶é—´æ ¼å¼åŒ–ä¸æ•°æ®ç›‘å¬)

è¿™é‡Œæœ€å…³é”®çš„æ˜¯å°†æ‰‹æœºä¼ æ¥çš„**çº¯ç§’æ•°ï¼ˆNumberï¼‰å®æ—¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ˆ00:00ï¼‰**ã€‚

**`index.js`**

```javascript
import distributedDataObject from '@ohos.data.distributedDataObject';

export default {
    data: {
        statusText: "å¼€å¯å½•éŸ³",
        displayTime: "00:00",
        progress: 0,
        isRecording: false,
        g_localObject: null
    },
    onInit() {
        // åˆå§‹åŒ–åˆ†å¸ƒå¼å¯¹è±¡
        this.g_localObject = distributedDataObject.create(this.context, { 
            recordingTime: 0, 
            isRecording: false 
        });
        this.g_localObject.setSessionId("secure_recorder_session");

        // æ ¸å¿ƒç›‘å¬é€»è¾‘
        this.g_localObject.on("change", (sessionId, fields) => {
            fields.forEach(field => {
                if (field === "recordingTime") {
                    // è·å–æ‰‹æœºä¼ æ¥çš„ç§’æ•°å¹¶æ ¼å¼åŒ–
                    this.updateDisplay(this.g_localObject[field]);
                }
                if (field === "isRecording") {
                    this.isRecording = this.g_localObject[field];
                    this.statusText = this.isRecording ? "åœæ­¢å½•éŸ³" : "å¼€å¯å½•éŸ³";
                }
            });
        });
    },
    // å°†ç§’æ•°è½¬ä¸º åˆ†:ç§’ æ ¼å¼
    updateDisplay(totalSeconds) {
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        
        // è¡¥é›¶é€»è¾‘ï¼šä¿è¯å§‹ç»ˆæ˜¾ç¤ºä¸º 00:00 æ ¼å¼
        const mStr = minutes < 10 ? '0' + minutes : minutes;
        const sStr = seconds < 10 ? '0' + seconds : seconds;
        
        this.displayTime = `${mStr}:${sStr}`;
        
        // è¿›åº¦æ¡æ¨¡æ‹Ÿï¼ˆä¾‹å¦‚æ¯60ç§’èµ°å®Œä¸€ä¸ªå¾ªç¯ï¼‰
        this.progress = (seconds / 60) * 100;
    }
}

```

---

### 3. æ‰‹æœºç«¯ï¼šåŒæ­¥æ›´æ–°é€»è¾‘

åœ¨æ‰‹æœºç«¯çš„ `RecorderService` ä¸­ï¼Œä½ éœ€è¦ç¡®ä¿åœ¨å½•éŸ³çš„åŒæ—¶ä¸æ–­æ¨é€æ•°æ®ã€‚

**`RecorderService.ts` è¡¥å…¨ç‰‡æ®µ**

```typescript
private timer: number = -1;
private secondsCounter: number = 0;

async startRecording() {
    // ... ä¹‹å‰çš„ avRecorder å¯åŠ¨ä»£ç  ...
    
    this.secondsCounter = 0;
    this.timer = setInterval(() => {
        this.secondsCounter++;
        // è¿™ä¸€æ­¥ä¿®æ”¹ä¼šè‡ªåŠ¨è§¦å‘æ‰‹ç¯ç«¯çš„ 'change' äº‹ä»¶
        this.g_localObject["recordingTime"] = this.secondsCounter;
        this.g_localObject["isRecording"] = true;
    }, 1000);
}

async stopRecording() {
    // ... åœæ­¢å½•éŸ³ä»£ç  ...
    clearInterval(this.timer);
    this.g_localObject["isRecording"] = false;
    this.g_localObject["recordingTime"] = 0;
}

```

---

### 4. æ ·å¼å»ºè®® (CSS)

ä¸ºäº†è®©â€œæ—¶é—´â€åœ¨æ‰‹ç¯ä¸Šæ¸…æ™°å¯è§ï¼Œå»ºè®®ä½¿ç”¨ç­‰å®½å­—ä½“ï¼Œé˜²æ­¢æ•°å­—è·³åŠ¨ã€‚

**`index.css`**

```css
.timer-display {
    font-size: 38px; /* å¤§å­—ä½“ */
    font-family: sans-serif; /* æˆ–è€…ä½¿ç”¨ç³»ç»Ÿç­‰å®½å­—ä½“ */
    color: #00FF00; /* è§å…‰ç»¿ï¼Œæ›´æœ‰ç›‘æ§æ„Ÿ */
    font-weight: bold;
    margin-bottom: 10px;
}
.progress-bar {
    width: 80%;
    height: 4px;
    color: #00FF00;
    margin-bottom: 20px;
}

```

### è°ƒè¯•å°ç»“ï¼š

å½“ä½ ç‚¹å‡»æ‰‹ç¯ä¸Šçš„â€œå¼€å¯å½•éŸ³â€ï¼Œæ‰‹æœºä¼šå¯åŠ¨å½•éŸ³æœºï¼ŒåŒæ—¶å¼€å¯å®šæ—¶å™¨ã€‚å®šæ—¶å™¨æ¯ç§’ä¿®æ”¹ `recordingTime`ï¼Œæ‰‹ç¯ç›‘å¬åˆ°å˜åŒ–åï¼Œç«‹å³é€šè¿‡ `updateDisplay` å‡½æ•°æ›´æ–°ç•Œé¢ã€‚è¿™æ ·ï¼Œä½ å°±å®Œæˆäº†ä¸€ä¸ªå…·å¤‡**åŒå‘å®æ—¶é€šä¿¡**åŠŸèƒ½çš„ä¸“ä¸šçº§æ‰‹ç¯åº”ç”¨åŸå‹ã€‚

ä½ ç°åœ¨æ˜¯å¦å·²ç»å‡†å¤‡å¥½åœ¨ **DevEco Studio** ä¸­åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®æ¥è·‘é€šè¿™ä¸ªæµç¨‹äº†ï¼Ÿå¦‚æœé‡åˆ°æŠ¥é”™ï¼Œå¯ä»¥ç›´æ¥æŠŠé”™è¯¯ä¿¡æ¯å‘ç»™æˆ‘ï¼Œæˆ‘å¸®ä½ æ’æŸ¥ã€‚