AWS Lambda 是 Amazon Web Services（AWS）提供的**无服务器计算服务**，它允许开发者运行代码而无需预置或管理服务器。 Lambda 会根据事件自动触发代码执行，并动态分配计算资源，按实际使用量计费（按请求次数和执行时间收费）。


### **核心特点**
1. **无服务器架构**  
   无需管理服务器、虚拟机或容器，AWS 负责基础设施维护（包括扩容、补丁更新、故障恢复等），开发者只需专注于编写代码。

2. **事件驱动**  
   代码（称为“Lambda 函数”）由事件触发，例如：
   - API 请求（通过 API Gateway）
   - 数据库变更（DynamoDB 流）
   - 文件上传（S3 桶事件）
   - 定时任务（CloudWatch Events）
   - 消息队列消息（SQS）等。

3. **自动扩缩容**  
   随请求量自动扩展：从每天几次到每秒数千次请求，Lambda 会创建足够的函数实例处理负载，无需手动配置。

4. **按使用付费**  
   仅为函数执行时间和计算资源付费（精确到毫秒），空闲时不收费。定价基于：
   - 函数调用次数（百万次为单位）
   - 执行 duration（代码运行时间，与配置的内存成正比）。

5. **多语言支持**  
   原生支持 Node.js、Python、Java、C#、Go、Ruby 等语言，也可通过自定义运行时支持其他语言。


### **基本概念**
- **Lambda 函数**：包含业务逻辑的代码包，是 Lambda 的基本执行单元。
- **触发器**：触发函数执行的事件源（如 API Gateway、S3 等）。
- **执行角色（IAM Role）**：定义函数有权访问的 AWS 资源（遵循最小权限原则）。
- **层（Layer）**：可重用的代码包（如库、SDK），可共享给多个函数，减少代码冗余。
- **版本与别名**：版本用于固化函数代码，别名用于指向特定版本（便于灰度发布、蓝绿部署）。


### **典型使用场景**
1. **API 后端**  
   结合 API Gateway 构建无服务器 API，处理 HTTP 请求（如用户认证、数据查询），适合流量波动大的场景（无需为峰值预留资源）。

2. **数据处理**  
   实时处理文件或数据流：
   - S3 上传文件后，自动触发函数进行格式转换、内容分析或存储到数据库。
   - 处理 DynamoDB 变更流，同步数据到其他服务（如 Elasticsearch）。

3. **自动化任务**  
   通过 CloudWatch Events 定时触发函数，执行备份、日志清理、报表生成等周期性任务。

4. **事件响应**  
   例如：
   - 检测到异常日志时触发函数发送告警（结合 CloudWatch Logs）。
   - 处理 SQS 消息队列，实现异步任务（如订单处理、邮件发送）。

5. **扩展其他 AWS 服务**  
   为 ECS/EKS 容器、RDS 数据库等服务添加自定义扩展逻辑（如自动扩缩容策略、数据校验）。


### **快速入门（Node.js 示例）**
#### 1. 创建 Lambda 函数
登录 AWS 控制台，进入 Lambda 服务，点击“创建函数”，选择“从头开始创建”：
- 函数名称：`hello-world`
- 运行时：`Node.js 18.x`
- 执行角色：创建新角色（基本 Lambda 权限）。

#### 2. 编写代码
在函数代码编辑器中输入：
```javascript
exports.handler = async (event) => {
  // 处理事件（event 包含触发源数据）
  const name = event.name || 'World';
  const response = {
    statusCode: 200,
    body: JSON.stringify({ message: `Hello, ${name}!` }),
  };
  return response;
};
```

#### 3. 测试函数
- 点击“测试”，创建测试事件（默认 JSON 即可）。
- 运行测试，查看输出结果（应返回 `{"message":"Hello, World!"}`）。

#### 4. 添加触发器（可选）
例如，添加 API Gateway 触发器：
- 配置触发器类型为“API Gateway”。
- 创建新的 REST API，安全设置为“开放”（测试用）。
- 部署后，通过生成的 API 端点（如 `https://xxx.execute-api.region.amazonaws.com/default/hello-world`）访问函数。


### **优势与限制**
| **优势** | **限制** |
|----------|----------|
| 无需管理服务器，降低运维成本 | 最大执行时间：15 分钟（不适合长任务） |
| 自动扩缩容，适应流量波动 | 内存限制：128MB ~ 10GB |
| 按使用付费，成本优化 | 部署包大小限制：50MB（压缩后），250MB（未压缩） |
| 与 AWS 生态深度集成 | 冷启动延迟（首次调用或空闲后调用） |


### **最佳实践**
1. **控制函数大小**：拆分复杂逻辑为多个函数，使用层共享依赖，减少部署包体积。
2. **优化冷启动**：避免大依赖、减少初始化代码、使用 Provisioned Concurrency 预分配资源。
3. **遵循最小权限**：为执行角色配置仅必要的权限，避免过度授权。
4. **处理错误与重试**：配置死信队列（DLQ）处理失败事件，实现幂等性（避免重复处理）。
5. **监控与日志**：结合 CloudWatch 监控函数性能、错误率，使用结构化日志便于排查问题。


Lambda 是构建 serverless 架构的核心组件，常与 API Gateway、DynamoDB、S3 等服务组合，构建弹性高、成本低的云原生应用。